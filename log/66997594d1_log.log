2023-11-10 22:43:33,818 INFO: Контракт 66997594d1 был принят администраторами
2023-11-10 22:43:33,819 DEBUG: Request: method=post url=https://api.telegram.org/bot6432599280:{TOKEN}/editMessageText params={'text': '#контракт\n\n#123 \n\nСтатус контракта:\n\U0001f634Ожидает своего исполнителя\n\n<b>Тип:</b>\nОдноразовый\n\n<b>ТЗ:</b>\ndfsdf\n\n<b>Срок выполнения:</b>\nsdsdf\n\n<b>Стоимость:</b>\nsdfs BMC\n\n<b>Дополнительные условия:</b>\nsdf\n\n', 'chat_id': -1001558266063, 'message_id': 117, 'parse_mode': 'html', 'reply_markup': '{"inline_keyboard": [[{"text": "\\u041f\\u043e\\u0434\\u043f\\u0438\\u0441\\u0430\\u0442\\u044c \\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442", "url": "t.me/monopolycontractbot?start=signonetime66997594d1"}]]}'} files=None
2023-11-10 22:43:33,939 DEBUG: The server returned: 'b'{"ok":true,"result":{"message_id":117,"sender_chat":{"id":-1001558266063,"title":"z4eb4lo DEV.","username":"z4eb4lo_dev","type":"channel"},"chat":{"id":-1001558266063,"title":"z4eb4lo DEV.","username":"z4eb4lo_dev","type":"channel"},"date":1699645414,"edit_date":1699645414,"text":"#\\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442\\n\\n#123 \\n\\n\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441 \\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442\\u0430:\\n\\ud83d\\ude34\\u041e\\u0436\\u0438\\u0434\\u0430\\u0435\\u0442 \\u0441\\u0432\\u043e\\u0435\\u0433\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u0435\\u043b\\u044f\\n\\n\\u0422\\u0438\\u043f:\\n\\u041e\\u0434\\u043d\\u043e\\u0440\\u0430\\u0437\\u043e\\u0432\\u044b\\u0439\\n\\n\\u0422\\u0417:\\ndfsdf\\n\\n\\u0421\\u0440\\u043e\\u043a \\u0432\\u044b\\u043f\\u043e\\u043b\\u043d\\u0435\\u043d\\u0438\\u044f:\\nsdsdf\\n\\n\\u0421\\u0442\\u043e\\u0438\\u043c\\u043e\\u0441\\u0442\\u044c:\\nsdfs BMC\\n\\n\\u0414\\u043e\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u0435\\u043b\\u044c\\u043d\\u044b\\u0435 \\u0443\\u0441\\u043b\\u043e\\u0432\\u0438\\u044f:\\nsdf","entities":[{"offset":0,"length":9,"type":"hashtag"},{"offset":66,"length":4,"type":"bold"},{"offset":84,"length":3,"type":"bold"},{"offset":95,"length":16,"type":"bold"},{"offset":119,"length":10,"type":"bold"},{"offset":140,"length":23,"type":"bold"}],"reply_markup":{"inline_keyboard":[[{"text":"\\u041f\\u043e\\u0434\\u043f\\u0438\\u0441\\u0430\\u0442\\u044c \\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442","url":"http://t.me/monopolycontractbot?start=signonetime66997594d1"}]]}}}''
2023-11-10 22:43:34,036 DEBUG: Task complete
2023-11-10 22:43:37,049 DEBUG: The server returned: 'b'{"ok":true,"result":{"message_id":4669,"from":{"id":6432599280,"is_bot":true,"first_name":"Monopoly Bot","username":"monopolycontractbot"},"chat":{"id":1262539577,"first_name":"Mikhanoid","username":"Mikhanoid_skwlkr","type":"private"},"date":1699645417,"photo":[{"file_id":"AgACAgIAAxkDAAISPWVOh-nIjRjtDRlHAo1pl3iyWcbVAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADcwADMwQ","file_unique_id":"AQAD99ExGzemcEp4","file_size":696,"width":90,"height":90},{"file_id":"AgACAgIAAxkDAAISPWVOh-nIjRjtDRlHAo1pl3iyWcbVAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADbQADMwQ","file_unique_id":"AQAD99ExGzemcEpy","file_size":5621,"width":320,"height":320},{"file_id":"AgACAgIAAxkDAAISPWVOh-nIjRjtDRlHAo1pl3iyWcbVAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADeAADMwQ","file_unique_id":"AQAD99ExGzemcEp9","file_size":19527,"width":800,"height":800},{"file_id":"AgACAgIAAxkDAAISPWVOh-nIjRjtDRlHAo1pl3iyWcbVAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADeQADMwQ","file_unique_id":"AQAD99ExGzemcEp-","file_size":36659,"width":1280,"height":1280},{"file_id":"AgACAgIAAxkDAAISPWVOh-nIjRjtDRlHAo1pl3iyWcbVAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADdwADMwQ","file_unique_id":"AQAD99ExGzemcEp8","file_size":93858,"width":2560,"height":2560}],"caption":"\\u041d\\u0430 \\u0433\\u043e\\u043b\\u043e\\u0441\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435 \\u043f\\u043e\\u0441\\u0442\\u0443\\u043f\\u0438\\u043b \\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442:\\n\\n#\\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442\\n\\n#123 \\n\\n\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441 \\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442\\u0430:\\n\\ud83d\\ude34\\u041e\\u0436\\u0438\\u0434\\u0430\\u0435\\u0442 \\u0441\\u0432\\u043e\\u0435\\u0433\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u0435\\u043b\\u044f\\n\\n\\u0422\\u0438\\u043f:\\n\\u041e\\u0434\\u043d\\u043e\\u0440\\u0430\\u0437\\u043e\\u0432\\u044b\\u0439\\n\\n\\u0422\\u0417:\\ndfsdf\\n\\n\\u0421\\u0440\\u043e\\u043a \\u0432\\u044b\\u043f\\u043e\\u043b\\u043d\\u0435\\u043d\\u0438\\u044f:\\nsdsdf\\n\\n\\u0421\\u0442\\u043e\\u0438\\u043c\\u043e\\u0441\\u0442\\u044c:\\nsdfs BMC\\n\\n\\u0414\\u043e\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u0435\\u043b\\u044c\\u043d\\u044b\\u0435 \\u0443\\u0441\\u043b\\u043e\\u0432\\u0438\\u044f:\\nsdf\\n\\n\\n\\n\\u0412\\u0435\\u0440\\u0448\\u0438\\u0442\\u0435 \\u0435\\u0433\\u043e \\u0441\\u0443\\u0434\\u044c\\u0431\\u043e\\u0439!","caption_entities":[{"offset":35,"length":9,"type":"hashtag"},{"offset":101,"length":4,"type":"bold"},{"offset":119,"length":3,"type":"bold"},{"offset":130,"length":16,"type":"bold"},{"offset":154,"length":10,"type":"bold"},{"offset":175,"length":23,"type":"bold"}],"reply_markup":{"inline_keyboard":[[{"text":"\\u041f\\u0440\\u0438\\u043d\\u044f\\u0442\\u044c","url":"http://t.me/monopolycontractbot?start=votecontract_accept_66997594d1"},{"text":"\\u041e\\u0442\\u043a\\u043b\\u043e\\u043d\\u0438\\u0442\\u044c","url":"http://t.me/monopolycontractbot?start=votecontract_decline_66997594d1"}]]}}}''
2023-11-10 22:43:37,207 DEBUG: Request: method=post url=https://api.telegram.org/bot6432599280:{TOKEN}/sendPhoto params={'chat_id': 849106299, 'caption': 'На голосование поступил контракт:\n\n#контракт\n\n#123 \n\nСтатус контракта:\n\U0001f634Ожидает своего исполнителя\n\n<b>Тип:</b>\nОдноразовый\n\n<b>ТЗ:</b>\ndfsdf\n\n<b>Срок выполнения:</b>\nsdsdf\n\n<b>Стоимость:</b>\nsdfs BMC\n\n<b>Дополнительные условия:</b>\nsdf\n\n\n\nВершите его судьбой!', 'reply_markup': '{"inline_keyboard": [[{"text": "\\u041f\\u0440\\u0438\\u043d\\u044f\\u0442\\u044c", "url": "t.me/monopolycontractbot?start=votecontract_accept_66997594d1"}, {"text": "\\u041e\\u0442\\u043a\\u043b\\u043e\\u043d\\u0438\\u0442\\u044c", "url": "t.me/monopolycontractbot?start=votecontract_decline_66997594d1"}]]}', 'parse_mode': 'html'} files={'photo': <_io.BufferedReader name='design/newcontract.jpg'>}
2023-11-10 22:43:38,918 DEBUG: The server returned: 'b'{"ok":true,"result":[{"update_id":249918403,\n"message":{"message_id":4670,"from":{"id":487545908,"is_bot":false,"first_name":"\\u1160\\u0437\\u0438\\u0431\\u043b\\u043e","username":"z4eb4lo","language_code":"ru","is_premium":true},"chat":{"id":487545908,"first_name":"\\u1160\\u0437\\u0438\\u0431\\u043b\\u043e","username":"z4eb4lo","type":"private"},"date":1699645419,"text":"/start signonetime66997594d1","entities":[{"offset":0,"length":6,"type":"bot_command"}]}}]}''
2023-11-10 22:43:38,919 DEBUG: Received 1 new updates
2023-11-10 22:43:38,919 DEBUG: Task complete
2023-11-10 22:43:38,919 DEBUG: Received task
2023-11-10 22:43:38,919 DEBUG: Request: method=get url=https://api.telegram.org/bot6432599280:{TOKEN}/getChat params={'chat_id': 487545908} files=None
2023-11-10 22:43:38,922 DEBUG: Received task
2023-11-10 22:43:38,922 DEBUG: Request: method=get url=https://api.telegram.org/bot6432599280:{TOKEN}/getUpdates params={'offset': 249918404, 'timeout': 20, 'long_polling_timeout': 20} files=None
2023-11-10 22:43:38,974 DEBUG: The server returned: 'b'{"ok":true,"result":{"id":487545908,"first_name":"\\u1160\\u0437\\u0438\\u0431\\u043b\\u043e","username":"z4eb4lo","type":"private","active_usernames":["z4eb4lo"],"emoji_status_custom_emoji_id":"5256041592271157291","bio":"@valorantcard","has_private_forwards":true,"photo":{"small_file_id":"AQADAgADCqgxGzRcDx0ACAIAAzRcDx0ABOk-tDPsdmd2MwQ","small_file_unique_id":"AQADCqgxGzRcDx0AAQ","big_file_id":"AQADAgADCqgxGzRcDx0ACAMAAzRcDx0ABOk-tDPsdmd2MwQ","big_file_unique_id":"AQADCqgxGzRcDx0B"}}}''
2023-11-10 22:43:38,980 DEBUG: UnboundLocalError occurred, args=("cannot access local variable 'admin_id' where it is not associated with a value",)
Traceback (most recent call last):
  File "C:\Users\user\AppData\Local\Programs\Python\Python311\Lib\site-packages\telebot\util.py", line 90, in run
    task(*args, **kwargs)
  File "C:\Users\user\AppData\Local\Programs\Python\Python311\Lib\site-packages\telebot\__init__.py", line 6770, in _run_middlewares_and_handler
    result = handler['function'](message)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pycharmprojects\contractBOT\main.py", line 278, in start
    bot.send_photo(admin_id, photo=open('design/sign.jpg', 'rb'),
                   ^^^^^^^^
UnboundLocalError: cannot access local variable 'admin_id' where it is not associated with a value

2023-11-10 22:43:38,980 INFO: Starting your bot with username: [@monopolycontractbot]
2023-11-10 22:43:38,980 INFO: Started polling.
2023-11-10 22:43:38,984 DEBUG: Received task
2023-11-10 22:43:38,984 DEBUG: Request: method=get url=https://api.telegram.org/bot6432599280:{TOKEN}/getUpdates params={'offset': 249918404, 'timeout': 20, 'long_polling_timeout': 20} files=None
2023-11-10 22:43:39,157 DEBUG: The server returned: 'b'{"ok":false,"error_code":409,"description":"Conflict: terminated by other getUpdates request; make sure that only one bot instance is running"}''
2023-11-10 22:43:39,159 DEBUG: ApiTelegramException occurred, args=('A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running',)
Traceback (most recent call last):
  File "C:\Users\user\AppData\Local\Programs\Python\Python311\Lib\site-packages\telebot\util.py", line 90, in run
    task(*args, **kwargs)
  File "C:\Users\user\AppData\Local\Programs\Python\Python311\Lib\site-packages\telebot\__init__.py", line 649, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python311\Lib\site-packages\telebot\__init__.py", line 623, in get_updates
    json_updates = apihelper.get_updates(self.token, offset, limit, timeout, allowed_updates, long_polling_timeout)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python311\Lib\site-packages\telebot\apihelper.py", line 321, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python311\Lib\site-packages\telebot\apihelper.py", line 162, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\user\AppData\Local\Programs\Python\Python311\Lib\site-packages\telebot\apihelper.py", line 189, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2023-11-10 22:43:41,820 DEBUG: The server returned: 'b'{"ok":true,"result":{"message_id":4671,"from":{"id":6432599280,"is_bot":true,"first_name":"Monopoly Bot","username":"monopolycontractbot"},"chat":{"id":849106299,"first_name":"\\u041c\\u0430\\u0440\\u0438\\u044f","last_name":"\\u0415\\u0440\\u0435\\u043c\\u0438\\u0445\\u0438\\u043d\\u0430","type":"private"},"date":1699645422,"photo":[{"file_id":"AgACAgIAAxkDAAISP2VOh-5wy2JEGio-vzoIDsFpC42hAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADcwADMwQ","file_unique_id":"AQAD99ExGzemcEp4","file_size":696,"width":90,"height":90},{"file_id":"AgACAgIAAxkDAAISP2VOh-5wy2JEGio-vzoIDsFpC42hAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADbQADMwQ","file_unique_id":"AQAD99ExGzemcEpy","file_size":5621,"width":320,"height":320},{"file_id":"AgACAgIAAxkDAAISP2VOh-5wy2JEGio-vzoIDsFpC42hAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADeAADMwQ","file_unique_id":"AQAD99ExGzemcEp9","file_size":19527,"width":800,"height":800},{"file_id":"AgACAgIAAxkDAAISP2VOh-5wy2JEGio-vzoIDsFpC42hAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADeQADMwQ","file_unique_id":"AQAD99ExGzemcEp-","file_size":36659,"width":1280,"height":1280},{"file_id":"AgACAgIAAxkDAAISP2VOh-5wy2JEGio-vzoIDsFpC42hAAL30TEbN6ZwSkB_XEdd8v1QAQADAgADdwADMwQ","file_unique_id":"AQAD99ExGzemcEp8","file_size":93858,"width":2560,"height":2560}],"caption":"\\u041d\\u0430 \\u0433\\u043e\\u043b\\u043e\\u0441\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435 \\u043f\\u043e\\u0441\\u0442\\u0443\\u043f\\u0438\\u043b \\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442:\\n\\n#\\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442\\n\\n#123 \\n\\n\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441 \\u043a\\u043e\\u043d\\u0442\\u0440\\u0430\\u043a\\u0442\\u0430:\\n\\ud83d\\ude34\\u041e\\u0436\\u0438\\u0434\\u0430\\u0435\\u0442 \\u0441\\u0432\\u043e\\u0435\\u0433\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u0435\\u043b\\u044f\\n\\n\\u0422\\u0438\\u043f:\\n\\u041e\\u0434\\u043d\\u043e\\u0440\\u0430\\u0437\\u043e\\u0432\\u044b\\u0439\\n\\n\\u0422\\u0417:\\ndfsdf\\n\\n\\u0421\\u0440\\u043e\\u043a \\u0432\\u044b\\u043f\\u043e\\u043b\\u043d\\u0435\\u043d\\u0438\\u044f:\\nsdsdf\\n\\n\\u0421\\u0442\\u043e\\u0438\\u043c\\u043e\\u0441\\u0442\\u044c:\\nsdfs BMC\\n\\n\\u0414\\u043e\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u0435\\u043b\\u044c\\u043d\\u044b\\u0435 \\u0443\\u0441\\u043b\\u043e\\u0432\\u0438\\u044f:\\nsdf\\n\\n\\n\\n\\u0412\\u0435\\u0440\\u0448\\u0438\\u0442\\u0435 \\u0435\\u0433\\u043e \\u0441\\u0443\\u0434\\u044c\\u0431\\u043e\\u0439!","caption_entities":[{"offset":35,"length":9,"type":"hashtag"},{"offset":101,"length":4,"type":"bold"},{"offset":119,"length":3,"type":"bold"},{"offset":130,"length":16,"type":"bold"},{"offset":154,"length":10,"type":"bold"},{"offset":175,"length":23,"type":"bold"}],"reply_markup":{"inline_keyboard":[[{"text":"\\u041f\\u0440\\u0438\\u043d\\u044f\\u0442\\u044c","url":"http://t.me/monopolycontractbot?start=votecontract_accept_66997594d1"},{"text":"\\u041e\\u0442\\u043a\\u043b\\u043e\\u043d\\u0438\\u0442\\u044c","url":"http://t.me/monopolycontractbot?start=votecontract_decline_66997594d1"}]]}}}''
2023-11-10 22:43:41,821 DEBUG: Request: method=post url=https://api.telegram.org/bot6432599280:{TOKEN}/sendMessage params={'chat_id': '487545908', 'text': 'Действие выполнено!'} files=None
2023-11-10 22:43:41,933 DEBUG: The server returned: 'b'{"ok":true,"result":{"message_id":4672,"from":{"id":6432599280,"is_bot":true,"first_name":"Monopoly Bot","username":"monopolycontractbot"},"chat":{"id":487545908,"first_name":"\\u1160\\u0437\\u0438\\u0431\\u043b\\u043e","username":"z4eb4lo","type":"private"},"date":1699645422,"text":"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435 \\u0432\\u044b\\u043f\\u043e\\u043b\\u043d\\u0435\\u043d\\u043e!"}}''
2023-11-10 22:43:41,933 DEBUG: Task complete
2023-11-10 22:43:59,159 DEBUG: The server returned: 'b'{"ok":true,"result":[]}''
2023-11-10 22:43:59,159 DEBUG: Received 0 new updates
2023-11-10 22:43:59,159 DEBUG: Task complete
2023-11-10 22:43:59,159 DEBUG: Received task
2023-11-10 22:43:59,160 DEBUG: Request: method=get url=https://api.telegram.org/bot6432599280:{TOKEN}/getUpdates params={'offset': 249918404, 'timeout': 20, 'long_polling_timeout': 20} files=None
2023-11-10 22:44:19,212 DEBUG: The server returned: 'b'{"ok":true,"result":[]}''
2023-11-10 22:44:19,212 DEBUG: Received 0 new updates
2023-11-10 22:44:19,212 DEBUG: Task complete
2023-11-10 22:44:19,213 DEBUG: Received task
2023-11-10 22:44:19,213 DEBUG: Request: method=get url=https://api.telegram.org/bot6432599280:{TOKEN}/getUpdates params={'offset': 249918404, 'timeout': 20, 'long_polling_timeout': 20} files=None
